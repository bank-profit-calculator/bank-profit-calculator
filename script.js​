// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙˆÙƒ
const bankCertificates = [
  {
    bank: "Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù‚Ù…Ø©", rate: 19, type: "Ø«Ø§Ø¨Øª", pros: "Ø¹Ø§Ø¦Ø¯ Ù…Ø±ØªÙØ¹", cons: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù†ÙˆØ±", rate: 17, type: "Ø«Ø§Ø¨Øª", pros: "Ø«Ø§Ø¨Øª Ù„Ù…Ø¯Ø© Ø¹Ø§Ù…", cons: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø­Ø¨ Ù…Ø¨ÙƒØ±" },
    ]
  },
  {
    bank: "CIB - Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ø§Ù„Ø¯ÙˆÙ„ÙŠ",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Wealth", rate: 20, type: "Ø«Ø§Ø¨Øª", pros: "Ø£Ø¹Ù„Ù‰ Ø¹Ø§Ø¦Ø¯", cons: "Ø­Ø¯ Ø£Ø¯Ù†Ù‰ Ù…Ø±ØªÙØ¹" }
    ]
  }
  // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¨Ù†ÙˆÙƒ Ù‡Ù†Ø§
];

// ØªØ¹Ø¨Ø¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ù†ÙˆÙƒ
function populateBanks() {
  const bankSelect = document.getElementById("bank");
  bankCertificates.forEach(bank => {
    const option = document.createElement("option");
    option.value = bank.bank;
    option.textContent = bank.bank;
    bankSelect.appendChild(option);
  });
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø®ØªØ§Ø±
function updateCertificates() {
  const bankName = document.getElementById("bank").value;
  const certificateSelect = document.getElementById("certificate");
  const selectedFilter = document.querySelector('input[name="filterType"]:checked')?.value;

  certificateSelect.innerHTML = "<option disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© / Ø§Ù„Ø¹Ø§Ø¦Ø¯</option>";

  const selectedBank = bankCertificates.find(bank => bank.bank === bankName);

  if (selectedBank) {
    let filteredCertificates = selectedBank.certificates;

    if (selectedFilter !== "all") {
      filteredCertificates = filteredCertificates.filter(cert => cert.type === selectedFilter);
    }

    filteredCertificates.forEach(cert => {
      const option = document.createElement("option");
      option.value = cert.name;
      option.textContent = `${cert.name} (${cert.type})`;
      certificateSelect.appendChild(option);
    });
  }
}

// ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø³Ø¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø´Ù‡Ø§Ø¯Ø©
function setRateFromCertificate() {
  const bankName = document.getElementById("bank").value;
  const certName = document.getElementById("certificate").value;
  const rateInput = document.getElementById("rate");

  const selectedBank = bankCertificates.find(bank => bank.bank === bankName);
  const selectedCert = selectedBank?.certificates.find(cert => cert.name === certName);

  if (selectedCert) {
    rateInput.value = selectedCert.rate;
  }
}

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯
function calculateInterest() {
  const amount = parseFloat(document.getElementById("amount").value);
  const rate = parseFloat(document.getElementById("rate").value);
  const period = document.querySelector('input[name="period"]:checked')?.value;
  const currency = document.getElementById("currency").value;
  const resultDiv = document.getElementById("result");

  if (isNaN(amount) || isNaN(rate) || !period) {
    resultDiv.innerHTML = '<p style="color: red;">âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</p>';
    return;
  }

  let yearlyInterest = (amount * rate) / 100;
  let result;

  if (period === "daily") {
    result = yearlyInterest / 365;
  } else if (period === "monthly") {
    result = yearlyInterest / 12;
  } else {
    result = yearlyInterest;
  }

  resultDiv.innerHTML = `
    <div style="background-color: #f3f3f3; padding: 15px; border-radius: 10px; margin-top: 20px; text-align: center;">
      <h3>ğŸ“Š Ø§Ù„Ù†ØªÙŠØ¬Ø©:</h3>
      <p style="font-size: 20px;">
        Ø§Ù„Ø¹Ø§Ø¦Ø¯ <strong>${getPeriodName(period)}</strong> Ù‡Ùˆ:
        <span style="color: green; font-weight: bold;">${result.toFixed(2)} ${getCurrencySymbol(currency)}</span>
      </p>
    </div>
  `;
}

// Ø§Ø³Ù… Ø§Ù„ÙØªØ±Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ
function getPeriodName(value) {
  switch (value) {
    case 'daily': return 'Ø§Ù„ÙŠÙˆÙ…ÙŠ';
    case 'monthly': return 'Ø§Ù„Ø´Ù‡Ø±ÙŠ';
    case 'yearly': return 'Ø§Ù„Ø³Ù†ÙˆÙŠ';
    default: return '';
  }
}

// Ø±Ù…Ø² Ø§Ù„Ø¹Ù…Ù„Ø©
function getCurrencySymbol(code) {
  switch (code) {
    case 'EGP': return 'Ø¬Ù†ÙŠÙ‡';
    case 'USD': return '$';
    case 'SAR': return 'Ø±.Ø³';
    case 'EUR': return 'â‚¬';
    default: return '';
  }
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø±
function toggleTheme() {
  document.body.classList.toggle('dark');
  const btn = document.getElementById("toggleTheme");
  btn.textContent = document.body.classList.contains("dark")
    ? "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„ÙØ§ØªØ­"
    : "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø¯Ø§ÙƒÙ†";
}

// ØªØ´ØºÙŠÙ„ ÙƒÙ„ Ø­Ø§Ø¬Ø© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
window.onload = function () {
  populateBanks();
};
