// ğŸ¦ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙˆÙƒ ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª
const bankCertificates = [
  {
    bank: "Ø¨Ù†Ùƒ Ù…ØµØ±",
    certificates: [
      { name: "Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø«Ù„Ø§Ø«ÙŠØ©", rate: 19, type: "Ø´Ù‡Ø§Ø¯Ø©", pros: "Ø¹Ø§Ø¦Ø¯ Ø«Ø§Ø¨Øª Ø·ÙˆØ§Ù„ Ø§Ù„Ù…Ø¯Ø©", cons: "Ù„Ø§ ÙŠÙ…ÙƒÙ† ÙƒØ³Ø±Ù‡Ø§ Ù‚Ø¨Ù„ 6 Ø´Ù‡ÙˆØ±" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù‚Ù…Ø©", rate: 17, type: "Ø´Ù‡Ø§Ø¯Ø©", pros: "Ø¹Ø§Ø¦Ø¯ Ø´Ù‡Ø±ÙŠ Ù…Ù…ØªØ§Ø²", cons: "Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„ÙƒØ¨ÙŠØ±Ø© ÙÙ‚Ø·" },
      { name: "ÙˆØ¯ÙŠØ¹Ø© Ù‚ØµÙŠØ±Ø© Ø§Ù„Ø£Ø¬Ù„", rate: 13, type: "ÙˆØ¯ÙŠØ¹Ø©", pros: "Ù…Ø±ÙˆÙ†Ø© ÙÙŠ Ø§Ù„Ù…Ø¯Ø©", cons: "Ø¹Ø§Ø¦Ø¯ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª" }
    ]
  },
  {
    bank: "Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±", rate: 18.5, type: "Ø´Ù‡Ø§Ø¯Ø©", pros: "Ø¹Ø§Ø¦Ø¯ Ù…Ø¬Ø²ÙŠ", cons: "Ù„Ø§ ÙŠÙ…ÙƒÙ† ÙƒØ³Ø±Ù‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø¯Ø©" },
      { name: "ÙˆØ¯ÙŠØ¹Ø© 6 Ø´Ù‡ÙˆØ±", rate: 12.75, type: "ÙˆØ¯ÙŠØ¹Ø©", pros: "ÙØªØ±Ø© Ù‚ØµÙŠØ±Ø©", cons: "Ø¹Ø§Ø¦Ø¯ Ù‚Ù„ÙŠÙ„ Ù†Ø³Ø¨ÙŠÙ‹Ø§" }
    ]
  }
];

// ğŸ§© ØªØ¹Ø¨Ø¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ù†ÙˆÙƒ
function populateBanks() {
  const bankSelect = document.getElementById("bank");
  bankCertificates.forEach(bank => {
    const option = document.createElement("option");
    option.value = bank.bank;
    option.text = bank.bank;
    bankSelect.appendChild(option);
  });
}

// ğŸ§© ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø¨Ù†Ùƒ + ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
function updateCertificates() {
  const bankName = document.getElementById("bank").value;
  const certificateSelect = document.getElementById("certificate");
  const selectedFilter = document.querySelector('input[name="filterType"]:checked')?.value;

  certificateSelect.innerHTML = "<option disabled selected>Ø§Ø®ØªØ± Ø´Ù‡Ø§Ø¯Ø© / ÙˆØ¯ÙŠØ¹Ø©</option>";

  const selectedBank = bankCertificates.find(bank => bank.bank === bankName);

  if (selectedBank) {
    let filteredCertificates = selectedBank.certificates;

    if (selectedFilter !== "all") {
      filteredCertificates = filteredCertificates.filter(cert => cert.type === selectedFilter);
    }

    filteredCertificates.forEach(cert => {
      const option = document.createElement("option");
      option.value = cert.name;
      option.text = `${cert.name} (${cert.type})`;
      certificateSelect.appendChild(option);
    });
  }
}

// ğŸ“Š ØªØ¹ÙŠÙŠÙ† Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©
function setRateFromCertificate() {
  const bankName = document.getElementById("bank").value;
  const certName = document.getElementById("certificate").value;
  const rateInput = document.getElementById("rate");

  const selectedBank = bankCertificates.find(bank => bank.bank === bankName);
  const selectedCert = selectedBank.certificates.find(cert => cert.name === certName);

  if (selectedCert) {
    rateInput.value = selectedCert.rate;
  }
}

// ğŸ’¸ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯
function calculateInterest() {
  let amount = parseFloat(document.getElementById("amount").value);
  let rate = parseFloat(document.getElementById("rate").value);
  let period = document.querySelector('input[name="period"]:checked')?.value;
  let currency = document.getElementById("currency").value;

  if (isNaN(amount) || isNaN(rate) || !period) {
    document.getElementById("result").innerText = "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.";
    return;
  }

  let yearlyInterest = (amount * rate) / 100;
  let result;

  if (period === "daily") {
    result = yearlyInterest / 365;
  } else if (period === "monthly") {
    result = yearlyInterest / 12;
  } else {
    result = yearlyInterest;
  }

  document.getElementById("result").innerText =
    `ğŸ’¡ Ø§Ù„Ø¹Ø§Ø¦Ø¯ ${getPeriodName(period)}: ${result.toFixed(2)} ${getCurrencySymbol(currency)}`;
}

// ğŸ”„ Ø§Ø³Ù… Ø§Ù„ÙØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
function getPeriodName(value) {
  switch (value) {
    case 'daily': return 'Ø§Ù„ÙŠÙˆÙ…ÙŠ';
    case 'monthly': return 'Ø§Ù„Ø´Ù‡Ø±ÙŠ';
    case 'yearly': return 'Ø§Ù„Ø³Ù†ÙˆÙŠ';
    default: return '';
  }
}

// ğŸ’± Ø±Ù…Ø² Ø§Ù„Ø¹Ù…Ù„Ø©
function getCurrencySymbol(code) {
  switch (code) {
    case 'EGP': return 'Ø¬Ù†ÙŠÙ‡';
    case 'USD': return '$';
    case 'SAR': return 'Ø±.Ø³';
    case 'EUR': return 'â‚¬';
    default: return '';
  }
}

// ğŸŒ™ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
function toggleTheme() {
  document.body.classList.toggle('dark');
  const btn = document.getElementById("toggleTheme");
  btn.innerText = document.body.classList.contains("dark") ? "â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ" : "ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ";
}

// âœ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
window.onload = function () {
  populateBanks();
};
