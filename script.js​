// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙˆÙƒ ÙˆØ´Ù‡Ø§Ø¯Ø§ØªÙ‡Ø§
const bankCertificates = [
    // ... (Ø§Ø¨Ù‚Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†ÙˆÙƒ ÙƒÙ…Ø§ Ù‡ÙŠ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±)
];
// Ø¯Ø§Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©
function calculateInterest() {
    const amount = parseFloat(document.getElementById("amount").value);
    const rate = parseFloat(document.getElementById("rate").value);
    const period = document.querySelector('input[name="period"]:checked')?.value;
    const currency = document.getElementById("currency").value;
    const resultDiv = document.getElementById("result");

    if (isNaN(amount) || isNaN(rate) || !period) {
        resultDiv.innerHTML = '<p style="color: red;">âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</p>';
        return;
    }
    bank: "Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù‚Ù…Ø©", rate: 19, type: "Ø«Ø§Ø¨Øª", pros: "Ø¹Ø§Ø¦Ø¯ Ù…Ø±ØªÙØ¹ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ", cons: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ 6 Ø£Ø´Ù‡Ø±" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù†ÙˆØ±", rate: 17, type: "Ø«Ø§Ø¨Øª", pros: "Ø¹Ø§Ø¦Ø¯ Ø«Ø§Ø¨Øª Ù„Ù…Ø¯Ø© Ø¹Ø§Ù… ÙƒØ§Ù…Ù„", cons: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø­Ø¨ Ù…Ø¨ÙƒØ±" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø§Ø¯Ø®Ø§Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠØ©", rate: 13, type: "Ø«Ø§Ø¨Øª", pros: "Ø³Ø­Ø¨ Ø´Ù‡Ø±ÙŠ (Ù„Ø§ ÙŠÙÙ‚Ø¯ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„)", cons: "Ù…Ø¹Ø¯Ù„ Ø¹Ø§Ø¦Ø¯ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰" }
    ]
  },
  {
    bank: "Ø¨Ù†Ùƒ Ù…ØµØ± Ø§Ù„Ø¯ÙˆÙ„ÙŠ",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±", rate: 18.5, type: "Ø«Ø§Ø¨Øª", pros: "Ø¹Ø§Ø¦Ø¯ Ù…Ø±ØªÙØ¹ Ù„Ù…Ø¯Ø© Ø¹Ø§Ù…", cons: "ØºØ±Ø§Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø³Ø­Ø¨ Ù‚Ø¨Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø¯Ø¯" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙˆÙÙŠØ±", rate: 16.5, type: "Ø«Ø§Ø¨Øª", pros: "ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 6 Ø£Ø´Ù‡Ø±", cons: "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø³Ø­Ø¨ Ù‚Ø¨Ù„ 3 Ø£Ø´Ù‡Ø±" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© ØªÙˆÙÙŠØ± 6 Ø£Ø´Ù‡Ø±", rate: 12.75, type: "Ø«Ø§Ø¨Øª", pros: "Ù…Ø±ÙˆÙ†Ø© ÙÙŠ Ù…Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±", cons: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ" }
    ]
  },
  {
    bank: "Ø¨Ù†Ùƒ Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø£Ù…Ø§Ù†", rate: 18, type: "Ø«Ø§Ø¨Øª", pros: "Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø¹Ø¯ 3 Ø£Ø´Ù‡Ø±", cons: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„", rate: 15, type: "Ø«Ø§Ø¨Øª", pros: "ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 3 Ø£Ø´Ù‡Ø±", cons: "Ø¹Ø§Ø¦Ø¯ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ù…ÙŠØ²Ø©", rate: 13.5, type: "Ø«Ø§Ø¨Øª", pros: "Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª", cons: "Ø¹Ø§Ø¦Ø¯ Ù…Ù†Ø®ÙØ¶ Ù†Ø³Ø¨ÙŠØ§Ù‹" }
    ]
  },
  {
    bank: "CIB - Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ø§Ù„Ø¯ÙˆÙ„ÙŠ",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Wealth", rate: 20, type: "Ø«Ø§Ø¨Øª", pros: "Ø£Ø¹Ù„Ù‰ Ø¹Ø§Ø¦Ø¯ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø­Ø§Ù„ÙŠØ§Ù‹", cons: "Ø­Ø¯ Ø£Ø¯Ù†Ù‰ 100 Ø£Ù„Ù Ø¬Ù†ÙŠÙ‡" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© CIB", rate: 14, type: "Ø«Ø§Ø¨Øª", pros: "ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 6 Ø£Ø´Ù‡Ø±", cons: "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø³Ø­Ø¨ Ù…Ø¨ÙƒØ±Ø§Ù‹" }
    ]
  },
  {
    bank: "QNB Ø§Ù„Ø£Ù‡Ù„ÙŠ",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©", rate: 17.5, type: "Ø«Ø§Ø¨Øª", pros: "Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø¹Ø¯ 3 Ø£Ø´Ù‡Ø±", cons: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ 6 Ø£Ø´Ù‡Ø±" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© QNB Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©", rate: 14.25, type: "Ø«Ø§Ø¨Øª", pros: "ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 3 Ø£Ø´Ù‡Ø±", cons: "Ø¹Ø§Ø¦Ø¯ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†" }
    ]
  },
  {
    bank: "Ø¨Ù†Ùƒ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ù…ÙŠØ²", rate: 16.25, type: "Ø«Ø§Ø¨Øª", pros: "Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø¹Ø¯ Ø´Ù‡Ø± ÙˆØ§Ø­Ø¯", cons: "Ø¹Ø§Ø¦Ø¯ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…ØªÙˆØ³Ø·" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„", rate: 13.75, type: "Ø«Ø§Ø¨Øª", pros: "ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 6 Ø£Ø´Ù‡Ø±", cons: "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø³Ø­Ø¨ Ù…Ø¨ÙƒØ±Ø§Ù‹" }
    ]
  },
  {
    bank: "Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠ",
    certificates: [
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù†ÙˆØ±", rate: 18.25, type: "Ø«Ø§Ø¨Øª", pros: "Ø¹Ø§Ø¦Ø¯ Ø«Ø§Ø¨Øª Ù„Ù…Ø¯Ø© Ø¹Ø§Ù… ÙƒØ§Ù…Ù„", cons: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ" },
      { name: "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙˆÙÙŠØ±", rate: 6.5, type: "Ù…ØªØºÙŠØ±", pros: "Ø¹Ø§Ø¦Ø¯ Ù…ØªØºÙŠØ± Ø­Ø³Ø¨ Ø³Ø¹Ø± Ø§Ù„ÙØ§Ø¦Ø¯Ø©", cons: "Ø¹Ø§Ø¦Ø¯ ØºÙŠØ± Ù…Ø¶Ù…ÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ù‰ Ø§Ù„Ø·ÙˆÙŠÙ„" }
    ]
  }
];

// ØªØ¹Ø¨Ø¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ù†ÙˆÙƒ
function populateBanks() {
  const bankSelect = document.getElementById("bank");
  bankCertificates.forEach(bank => {
    const option = document.createElement("option");
    option.value = bank.bank;
    option.textContent = bank.bank;
    bankSelect.appendChild(option);
  });
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø®ØªØ§Ø±
function updateCertificates() {
  const bankName = document.getElementById("bank").value;
  const certificateSelect = document.getElementById("certificate");
  const selectedFilter = document.querySelector('input[name="filterType"]:checked')?.value;

  certificateSelect.innerHTML = "<option disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© / Ø§Ù„Ø¹Ø§Ø¦Ø¯</option>";

  const selectedBank = bankCertificates.find(bank => bank.bank === bankName);

  if (selectedBank) {
    let filteredCertificates = selectedBank.certificates;

    if (selectedFilter !== "all") {
      filteredCertificates = filteredCertificates.filter(cert => cert.type === selectedFilter);
    }

    filteredCertificates.forEach(cert => {
      const option = document.createElement("option");
      option.value = cert.name;
      option.textContent = `${cert.name} (${cert.type})`;
      certificateSelect.appendChild(option);
    });
  }
}

// ØªØ¹ÙŠÙŠÙ† Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø´Ù‡Ø§Ø¯Ø©
function setRateFromCertificate() {
  const bankName = document.getElementById("bank").value;
  const certName = document.getElementById("certificate").value;
  const rateInput = document.getElementById("rate");

  const selectedBank = bankCertificates.find(bank => bank.bank === bankName);
  const selectedCert = selectedBank?.certificates.find(cert => cert.name === certName);

  if (selectedCert) {
    rateInput.value = selectedCert.rate;
  }
}

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯
// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯
function calculateInterest() {
  let amount = parseFloat(document.getElementById("amount").value);
  let rate = parseFloat(document.getElementById("rate").value);
  let period = document.querySelector('input[name="period"]:checked')?.value;
  let currency = document.getElementById("currency").value;
  let resultDiv = document.getElementById("result");

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  if (isNaN(amount) || isNaN(rate) || !period) {
    resultDiv.innerHTML = `<p style="color: red;">âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</p>`;
    return;
  }

  // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ø³Ù†ÙˆÙŠ
  let yearlyInterest = (amount * rate) / 100;
  let result;

  if (period === "daily") {
    result = yearlyInterest / 365;
  } else if (period === "monthly") {
    result = yearlyInterest / 12;
  } else {
    result = yearlyInterest;
  }

  // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†ØªÙŠØ¬Ø©
  resultDiv.innerHTML = `
    <div style="background-color: #f3f3f3; padding: 15px; border-radius: 10px; margin-top: 20px; text-align: center;">
      <h3>ğŸ“Š Ø§Ù„Ù†ØªÙŠØ¬Ø©:</h3>
      <p style="font-size: 20px;">
        Ø§Ù„Ø¹Ø§Ø¦Ø¯ <strong>${getPeriodName(period)}</strong> Ù‡Ùˆ:
        <span style="color: green; font-weight: bold;">${result.toFixed(2)} ${getCurrencySymbol(currency)}</span>
      </p>
    </div>
  `;
}


  document.getElementById("result").textContent =
    `Ø§Ù„Ø¹Ø§Ø¦Ø¯ ${getPeriodName(period)}: ${result.toFixed(2)} ${getCurrencySymbol(currency)}`;
}

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ÙØªØ±Ø©
function getPeriodName(value) {
  switch (value) {
    case 'daily': return 'Ø§Ù„ÙŠÙˆÙ…ÙŠ';
    case 'monthly': return 'Ø§Ù„Ø´Ù‡Ø±ÙŠ';
    case 'yearly': return 'Ø§Ù„Ø³Ù†ÙˆÙŠ';
    default: return '';
  }
}

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ø§Ù„Ø¹Ù…Ù„Ø©
function getCurrencySymbol(code) {
  switch (code) {
    case 'EGP': return 'Ø¬Ù†ÙŠÙ‡';
    case 'USD': return '$';
    case 'SAR': return 'Ø±.Ø³';
    case 'EUR': return 'â‚¬';
    default: return '';
  }
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø±
function toggleTheme() {
  document.body.classList.toggle('dark');
  const btn = document.getElementById("toggleTheme");
  btn.textContent = document.body.classList.contains("dark") ? "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„ÙØ§ØªØ­" : "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø¯Ø§ÙƒÙ†";
}

// Ø¨Ù†Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©
function buildComparisonTable() {
  const tbody = document.querySelector("#comparisonTable tbody");
  tbody.innerHTML = "";

  bankCertificates.forEach(bank => {
    bank.certificates.forEach(cert => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${bank.bank}</td>
        <td>${cert.name}</td>
        <td>${cert.type}</td>
        <td>${cert.rate}%</td>
        <td><button onclick="useCertificate('${bank.bank}', '${cert.name}')">Ø§Ø³ØªØ®Ø¯Ù…</button></td>
      `;
      tbody.appendChild(row);
    });
  });
}

// Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø´Ù‡Ø§Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©
function useCertificate(bankName, certName) {
  document.getElementById("bank").value = bankName;
  updateCertificates();
  setTimeout(() => {
    document.getElementById("certificate").value = certName;
    setRateFromCertificate();
    window.scrollTo({ top: 0, behavior: "smooth" });
  }, 200);
}

// ØªØ­Ù…ÙŠÙ„ PDF Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø©
function downloadComparisonPDF() {
  const table = document.getElementById("advancedComparisonTable");
  const options = {
    margin: 0.5,
    filename: 'Ù…Ù‚Ø§Ø±Ù†Ø©_Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª_Ø§Ù„Ø¨Ù†ÙƒÙŠØ©.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
  };
  html2pdf().set(options).from(table).save();
}

// Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨
function shareOnWhatsApp() {
  const rows = document.querySelectorAll("#advancedComparisonTable tbody tr");
  if (rows.length === 0) {
    alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø­Ø§Ù„ÙŠØ§Ù‹.");
    return;
  }

  let message = "Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©:\n\n";
  rows.forEach(row => {
    const cells = row.querySelectorAll("td");
    message += `Ø§Ù„Ø¨Ù†Ùƒ: ${cells[0].textContent}\n`;
    message += `Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©: ${cells[1].textContent}\n`;
    message += `Ø§Ù„Ù†ÙˆØ¹: ${cells[2].textContent}\n`;
    message += `Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª: ${cells[3].textContent}\n`;
    message += `Ø§Ù„Ø¹ÙŠÙˆØ¨: ${cells[4].textContent}\n`;
    message += `Ø§Ù„Ø¹Ø§Ø¦Ø¯: ${cells[5].textContent}\n`;
    message += "------------------------\n";
  });

  const encodedMessage = encodeURIComponent(message);
  const whatsappURL = `https://wa.me/?text=${encodedMessage}`;
  window.open(whatsappURL, "_blank");
}

// ØªØµÙÙŠØ© Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
function filterAdvancedComparison() {
  const type = document.getElementById("multiFilterType").value;
  const selectedBanks = Array.from(document.querySelectorAll('#multiBankFilter input:checked')).map(cb => cb.value);
  const table = document.querySelector("#advancedComparisonTable tbody");
  table.innerHTML = "";

  bankCertificates.forEach(item => {
    if (selectedBanks.length > 0 && !selectedBanks.includes(item.bank)) return;

    item.certificates.forEach(cert => {
      if (type !== "all" && cert.type !== type) return;

      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${item.bank}</td>
        <td>${cert.name}</td>
        <td>${cert.type}</td>
        <td>${cert.pros || "â€”"}</td>
        <td>${cert.cons || "â€”"}</td>
        <td>${cert.rate}%</td>
      `;
      table.appendChild(row);
    });
  });
}

// ØªØ¹Ø¨Ø¦Ø© ÙÙ„ØªØ± Ø§Ù„Ø¨Ù†ÙˆÙƒ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯
function populateMultiBankFilter() {
  const container = document.getElementById("multiBankFilter");
  container.innerHTML = "";
  bankCertificates.forEach(bank => {
    const label = document.createElement("label");
    label.innerHTML = `<input type="checkbox" value="${bank.bank}"> ${bank.bank}`;
    container.appendChild(label);
  });
}

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
window.onload = function () {
  populateBanks();
  buildComparisonTable();
  populateMultiBankFilter();
};

document.addEventListener('DOMContentLoaded', function () {
  populateBanks();
  buildComparisonTable();
  populateMultiBankFilter();
});
